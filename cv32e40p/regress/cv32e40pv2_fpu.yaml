# YAML file to specify the ci_check regression testlist.
name: cv32e40pv2_fpu
description: fpu regression list

# build once
builds:
  clean_fw:
    cmd: make clean-bsp clean_test_programs
    dir: cv32e40p/sim/uvmt
  clean_corev-dv:
    cmd: make clean_riscv-dv clone_riscv-dv
    dir: cv32e40p/sim/uvmt

  # non-zfinx related tests
  uvmt_cv32e40p_pulp_fpu:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu
    dir: cv32e40p/sim/uvmt
    iss: 0
    cov: 0
  uvmt_cv32e40p_pulp_fpu_1cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_1cyclat
    dir: cv32e40p/sim/uvmt
    iss: 0
    cov: 0
  uvmt_cv32e40p_pulp_fpu_2cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_2cyclat
    dir: cv32e40p/sim/uvmt
    iss: 0
    cov: 0

  # zfinx related tests
  uvmt_cv32e40p_pulp_fpu_zfinx:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_zfinx
    dir: cv32e40p/sim/uvmt
    iss: 0
    cov: 0
  uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_zfinx_1cyclat
    dir: cv32e40p/sim/uvmt
    iss: 0
    cov: 0
  uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat:
    cmd: make comp comp_corev-dv
    cfg: pulp_fpu_zfinx_2cyclat
    dir: cv32e40p/sim/uvmt
    iss: 0
    cov: 0

# run many
tests:
  # non-zfinx related tests
  corev_rand_fp_instr_sanity_test_nonzfinx:
    testname: corev_rand_fp_instr_sanity_test
    builds:
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
    description: refer to testname
    test_cfg: floating_pt_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_sanity_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_test_nonzfinx:
    testname: corev_rand_fp_instr_test
    builds:
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
    description: refer to testname
    test_cfg: floating_pt_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_mlt_cyc_test_nonzfinx:
    testname: corev_rand_fp_instr_mlt_cyc_test
    builds:
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
    description: refer to testname
    test_cfg: floating_pt_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_mlt_cyc_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_w_special_ops_test_nonzfinx:
    testname: corev_rand_fp_instr_w_special_ops_test
    builds:
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
    description: refer to testname
    test_cfg: floating_pt_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_w_special_ops_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_data_fwd_test_nonzfinx:
    testname: corev_rand_fp_instr_data_fwd_test
    builds:
      - uvmt_cv32e40p_pulp_fpu
      - uvmt_cv32e40p_pulp_fpu_1cyclat
      - uvmt_cv32e40p_pulp_fpu_2cyclat
    description: refer to testname
    test_cfg: floating_pt_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_data_fwd_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  # zfinx related tests
  corev_rand_fp_instr_sanity_test_zfinx:
    testname: corev_rand_fp_instr_sanity_test
    builds:
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    description: refer to testname
    test_cfg: floating_pt_zfinx_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_sanity_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000" 
    num: 1

  corev_rand_fp_instr_test_zfinx:
    testname: corev_rand_fp_instr_test
    builds:
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    description: refer to testname
    test_cfg: floating_pt_zfinx_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_mlt_cyc_test_zfinx:
    testname: corev_rand_fp_instr_mlt_cyc_test
    builds:
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    description: refer to testname
    test_cfg: floating_pt_zfinx_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_mlt_cyc_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_w_special_ops_test_zfinx:
    testname: corev_rand_fp_instr_w_special_ops_test
    builds:
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    description: refer to testname
    test_cfg: floating_pt_zfinx_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_w_special_ops_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1

  corev_rand_fp_instr_data_fwd_test_zfinx:
    testname: corev_rand_fp_instr_data_fwd_test
    builds:
      - uvmt_cv32e40p_pulp_fpu_zfinx
      - uvmt_cv32e40p_pulp_fpu_zfinx_1cyclat
      - uvmt_cv32e40p_pulp_fpu_zfinx_2cyclat
    description: refer to testname
    test_cfg: floating_pt_zfinx_instr_en
    dir: cv32e40p/sim/uvmt
    cmd: make gen_corev-dv test TEST=corev_rand_fp_instr_data_fwd_test CFG_PLUSARGS="+UVM_TIMEOUT=1000000"
    num: 1


# Info:
# 1) GEN_COMPILE_FLAGS is compile flags container for gen_corev-dv
# 2) +UVM_TIMEOUT=<value_ns>
# 3) use below commands to generate regression file. e.g below for vrun rmdb file
#   - default (follow yaml settings): %./cv_regress --rmdb --file=<test>.yaml --outfile=<test>.rmdb --simulator=vsim
#   - override                      : %./cv_regress --rmdb --file=<test>.yaml --outfile=<test>.rmdb --simulator=vsim --iss=1 --cov --num=2
# 4) important switches that should be considered during overriding: --cov, --iss and --num
#
# potantial issues?
# 1) the merged ucdb - how it is hanndle in this case
